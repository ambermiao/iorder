(function(t){function e(e){for(var r,i,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)i=o[u],s[i]&&d.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);m&&m(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var o=a[i];0!==s[o]&&(r=!1)}r&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var r={},i={app:0},s={app:0},n=[];function o(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-2d0a4bbe":"dedcef8b","chunk-2d2086b7":"928b8546","chunk-2d21a7b7":"353dec1c","chunk-2e6644e2":"56cedaed","chunk-41d10986":"eb62e002","chunk-5e057367":"ccdf1281","chunk-5f0342f3":"b6f5f2a8","chunk-eca83402":"0668a141"}[t]+".js"}function l(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={"chunk-5f0342f3":1,"chunk-eca83402":1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise(function(e,a){for(var r="css/"+({}[t]||t)+"."+{"chunk-2d0a4bbe":"31d6cfe0","chunk-2d2086b7":"31d6cfe0","chunk-2d21a7b7":"31d6cfe0","chunk-2e6644e2":"31d6cfe0","chunk-41d10986":"31d6cfe0","chunk-5e057367":"31d6cfe0","chunk-5f0342f3":"982cea3f","chunk-eca83402":"7491cf85"}[t]+".css",i=l.p+r,s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var o=s[n],c=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(c===r||c===i))return e()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){o=u[n],c=o.getAttribute("data-href");if(c===r||c===i)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.request=r,a(s)},d.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(d)}).then(function(){i[t]=0}));var r=s[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise(function(e,a){r=s[t]=[e,a]});e.push(r[2]=n);var c,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(t),c=function(e){d.onerror=d.onload=null,clearTimeout(m);var a=s[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,n=new Error("Loading chunk "+t+" failed.\n("+r+": "+i+")");n.type=r,n.request=i,a[1](n)}s[t]=void 0}};var m=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,u.appendChild(d)}return Promise.all(e)},l.m=t,l.c=r,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(a,r,function(e){return t[e]}.bind(null,r));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/iorder/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var m=u;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"301c":function(t,e,a){t.exports=a.p+"img/banner.ee7f2bff.jpg"},"3c6f":function(t,e,a){t.exports=a.p+"img/logo_white.4d27a80d.svg"},"3dfd":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("nav",{staticClass:"navbar navbar-expand-lg  w-100",class:[t.is_home?"navbar-dark position-absolute":"navbar-light bg-light shadow-sm",t.is_list?"fixed-top":""]},[r("div",{staticClass:"container px-0"},[r("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t.is_home?r("img",{attrs:{src:a("3c6f"),width:"230"}}):r("img",{attrs:{src:a("e347"),width:"230"}})]),t.is_list?r("div",{staticClass:"searchBox pl-4"},[r("Search")],1):t._e(),r("div",{},[r("ul",{staticClass:"navbar-nav ml-auto"},[r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link cart",on:{click:t.linkRestaurant}},[r("span",{staticClass:"money"},[t._v("$ "+t._s(t.cartTotal))]),r("i",{staticClass:"icon iconfont icon-gouwuche"})])]),t.is_login&&t.member?r("li",{staticClass:"nav-item dropdown"},[t.member?r("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("i",{staticClass:"icon iconfont icon-geren mr-1 login-icon align-middle"}),r("span",{staticClass:"mobile-hide"},[t._v(t._s(t.member.name))])]):t._e(),r("div",{staticClass:"dropdown-menu"},[r("p",{staticClass:"px-4 text-center is-mobile"},[r("span",{staticClass:"text-primary"},[t._v(t._s(t.member.name))]),t._v(" 您好!!")]),r("router-link",{staticClass:"dropdown-item",attrs:{to:"/member/orderlist"}},[t._v("我的訂單")]),r("router-link",{staticClass:"dropdown-item",attrs:{to:"/member/info"}},[t._v("個人檔案")]),r("a",{staticClass:"dropdown-item",on:{click:t.logoutAction}},[t._v("登出")])],1)]):r("li",{staticClass:"nav-item dropdown"},[t._m(0)])])])],1)]),r("router-view"),r("footer",{staticClass:"bg-white  pb-3 border-top",class:t.is_payment?"pt-3":"pt-5"},[r("div",{staticClass:"container"},[t.is_payment?t._e():r("div",{staticClass:"row pb-5"},[t._m(1),t._m(2),t._m(3),t._m(4),t._m(5)]),r("div",{staticClass:"copy text-black-50 text-right font-weight-light",staticStyle:{"font-size":"13px"}},[t._v("\n        © Copyright 2018 by Amber Chen\n      ")])])]),r("login-modal")],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"nav-link",attrs:{"data-toggle":"modal","data-target":"#loginModal"}},[a("i",{staticClass:"icon iconfont icon-geren mr-1 login-icon align-middle"}),a("span",{staticClass:"mobile-hide"},[t._v("登入/註冊")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12 col-sm-3 col-lg-3"},[r("div",{staticClass:"downLogo"},[r("img",{attrs:{src:a("c176"),width:"150"}})]),r("div",{staticClass:"social mt-4 text-black-50"},[r("a",[r("i",{staticClass:"fab fa-facebook-f"})]),r("a",[r("i",{staticClass:"fab fa-instagram"})]),r("a",[r("i",{staticClass:"fab fa-youtube"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col-sm-2 col-lg-2"},[a("h6",[t._v("關於微碧愛普")]),a("ul",{staticClass:"list mt-4 text-black-50"},[a("li",[a("a",[t._v("聯絡我們")])]),a("li",[a("a",[t._v("團隊介紹")])]),a("li",[a("a",[t._v("人才招募")])]),a("li",[a("a",[t._v("部落格")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 col-sm-2 col-lg-2"},[a("h6",[t._v("開發產品")]),a("ul",{staticClass:"list mt-4 text-black-50"},[a("li",[a("a",[t._v("功能特色")])]),a("li",[a("a",[t._v("價格方案")])]),a("li",[a("a",[t._v("Q&A")])]),a("li",[a("a",[t._v("週邊配件")])]),a("li",[a("a",[t._v("行動支付")])])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12 col-sm-2 col-lg-2 download"},[r("h6",[t._v("下載APP")]),r("ul",{staticClass:"list mt-4"},[r("li",[r("a",[r("img",{attrs:{src:a("c482"),width:"120"}})])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-sm-3 col-lg-3"},[a("h6",[t._v("訂閱最新消息")]),a("form",{staticClass:"mt-4",attrs:{action:""}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-black-50",attrs:{for:"exampleInputEmail1"}},[t._v("輸入電子郵件：")]),a("input",{staticClass:"form-control text-black-50",attrs:{type:"email",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"}})]),a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"}},[t._v("訂閱")])])])}],s=(a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"loginModal",staticClass:"modal fade",attrs:{id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"loginModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[t.is_register?a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.is_email,expression:"is_email"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n                    輸入的電子郵件已經被註冊\n                ")]),a("form",{attrs:{"data-vv-scope":"register-form"},on:{submit:function(e){return e.preventDefault(),t.registerAction(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.register.name,expression:"register.name"}],staticClass:"form-control",class:{"is-validated":t.errors.has("register-form.姓名")},attrs:{type:"text",name:"姓名",placeholder:"Name"},domProps:{value:t.register.name},on:{input:function(e){e.target.composing||t.$set(t.register,"name",e.target.value)}}}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("register-form.姓名"),expression:"errors.has('register-form.姓名')"}],staticClass:"form-text text-danger"},[t._v(t._s(t.errors.first("register-form.姓名")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v("電子郵件")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.register.email,expression:"register.email"}],staticClass:"form-control",class:{"is-validated":t.errors.has("register-form.email")},attrs:{type:"email",name:"email",placeholder:"Email"},domProps:{value:t.register.email},on:{input:function(e){e.target.composing||t.$set(t.register,"email",e.target.value)}}}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("register-form.email"),expression:"errors.has('register-form.email')"}],staticClass:"form-text text-danger"},[t._v(t._s(t.errors.first("register-form.email")))])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("密碼")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_num",expression:"'required|alpha_num'"},{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],staticClass:"form-control",class:{"is-validated":t.errors.has("register-form.密碼")},attrs:{type:"password",name:"密碼",id:"exampleInputPassword1",placeholder:"Password"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("register-form.密碼"),expression:"errors.has('register-form.密碼')"}],staticClass:"form-text text-danger"},[t._v(t._s(t.errors.first("register-form.密碼")))])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"phone"}},[t._v("手機號碼")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^09\d{8}$/},expression:"{ required: true, regex: /^09\\d{8}$/ }"},{name:"model",rawName:"v-model",value:t.register.phone,expression:"register.phone"}],staticClass:"form-control",class:{"is-validated":t.errors.has("register-form.手機號碼")},attrs:{type:"text",name:"手機號碼",id:"phone",placeholder:"Phone"},domProps:{value:t.register.phone},on:{input:function(e){e.target.composing||t.$set(t.register,"phone",e.target.value)}}}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("register-form.手機號碼"),expression:"errors.has('register-form.手機號碼')"}],staticClass:"form-text text-danger"},[t._v(t._s(t.errors.first("register-form.手機號碼")))])]),a("button",{staticClass:"btn btn-primary w-100 mt-4",attrs:{type:"submit"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.register_loading,expression:"!register_loading"}]},[t._v("註冊")]),a("clip-loader",{attrs:{loading:t.register_loading,color:"#fff",size:"1rem"}})],1),a("p",{staticClass:"text-center mt-4 text-muted"},[t._v("已有帳戶? "),a("a",{staticClass:"text-primary",on:{click:function(e){t.is_register=!1}}},[t._v("登入")])])])])]):a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.is_login,expression:"is_login == false"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n                    輸入的電子郵件或密碼不正確\n                ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.loginAction(e)}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("電子郵件")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.login.email,expression:"login.email",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:"Email"},domProps:{value:t.login.email},on:{input:function(e){e.target.composing||t.$set(t.login,"email",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.login.password,expression:"login.password",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"Password"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),a("button",{staticClass:"btn btn-primary w-100 mt-4",attrs:{type:"submit"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.login_loading,expression:"!login_loading"}]},[t._v("登入")]),a("clip-loader",{attrs:{loading:t.login_loading,color:"#fff",size:"1rem"}})],1),a("p",{staticClass:"text-center mt-4 text-muted"},[t._v("尚未設立帳戶？ "),a("a",{staticClass:"text-primary",on:{click:function(e){t.is_register=!0}}},[t._v("免費註冊")])])])])])])])}),n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"loginModalLabel"}},[t._v("會員登入")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"loginModalLabel"}},[t._v("會員註冊")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=a("da7a"),l={name:"LoginModal",components:{ClipLoader:o["a"]},data:function(){return{is_register:!1,is_login:!0,is_email:!1,login:{email:"",password:""},register:{name:"",email:"",password:"",phone:""},login_loading:!1,register_loading:!1}},methods:{loginAction:function(){var t=this;this.login_loading=!0,this.$store.dispatch("login",this.login).then(function(){t.$nextTick(function(){t.login_loading=!1,$("#loginModal").modal("hide")}),t.$router.go(0)}).catch(function(){t.login_loading=!1,t.is_login=!1,t.login.email="",t.login.password=""})},registerAction:function(){var t=this;this.$validator.validateAll("register-form").then(function(e){e&&(t.register_loading=!0,t.$store.dispatch("register",t.register).then(function(){t.$nextTick(function(){t.register_loading=!1,$("#loginModal").modal("hide")}),t.$router.go(0)}).catch(function(){t.register_loading=!1,t.is_email=!0,t.register.email="",t.register.password="",t.register.name="",t.register.phone=""}))})}}},c=l,u=a("2877"),d=Object(u["a"])(c,s,n,!1,null,null,null);d.options.__file="LoginModal.vue";var m=d.exports,p=a("c106"),f={components:{LoginModal:m,Search:p["a"]},mounted:function(){this.$store.dispatch("getMember"),this.w_width=window.innerWidth,window.addEventListener("resize",this.handleResize)},data:function(){return{w_width:0,scrollTop:0}},computed:{is_home:function(){return"/"==this.$route.path&&this.w_width>960},is_list:function(){return"/restaurant"==this.$route.path},is_login:function(){return this.$store.state.is_login},is_payment:function(){return"/payment"==this.$route.path},member:function(){return this.$store.state.member},cartTotal:function(){return this.$store.getters.cartTotal}},methods:{handleResize:function(){this.w_width=window.innerWidth},logoutAction:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.go(0)})},linkRestaurant:function(){this.$store.getters.cartTotal>0&&this.$router.push({name:"restaurant",params:{id:this.$store.state.cart.restaurant_id}})}}},h=f,g=Object(u["a"])(h,r,i,!1,null,null,null);g.options.__file="App.vue";e["a"]=g.exports},"41cb":function(t,e,a){"use strict";var r=a("2b0e"),i=a("8c4f"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("section",{staticClass:"banner position-relative",style:{"background-image":"url("+t.banner+")"}},[a("div",{staticClass:"Txt w-100 text-center"},[t._m(0),a("Search")],1)]),a("section",{staticClass:"category bg-light shadow-sm pt-3"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("swiper",{attrs:{options:t.tagSwiperOption}},t._l(t.getTagData,function(e){return e.is_index?a("swiper-slide",{key:e.id,staticClass:"col col-lg-1 text-center"},[a("div",{staticClass:"tag-list"},[a("a",{on:{click:function(a){t.selectedTag(e.title)}}},[a("img",{attrs:{src:e.image,width:"40",alt:""}}),a("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(e.title))])])])]):t._e()}))],1)])]),a("section",{staticClass:"bg-secondary py-6"},[a("div",{staticClass:"container"},[a("h3",{staticClass:"font-weight-normal text-black-50 mb-4"},[t._v("熱門餐廳：")]),a("div",{},[a("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},[t._l(t.getRestaurantData,function(e){return a("swiper-slide",{key:e.id},[a("div",{staticClass:"item mb-4"},[a("router-link",{attrs:{to:{name:"restaurant",params:{id:e.id}}}},[a("div",{staticClass:"card item-card shadow-sm"},[a("div",{staticClass:"Img"},[a("img",{staticClass:"card-img-top",attrs:{src:e.list_img,alt:""}})]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"sample pb-2 border-bottom"},[a("div",{staticClass:"logo border align-top"},[a("img",{staticClass:"w-100",attrs:{src:e.logo,alt:""}})]),a("div",{staticClass:"title d-inline-block p-2"},[a("h3",{staticClass:"card-text mb-4 text-white"},[t._v(t._s(e.title))]),a("span",{staticClass:"tag text-muted"},t._l(e.tag_id,function(r,i){return a("b",{key:i,staticClass:"font-weight-normal"},[t._v(t._s(r)),i!=e.tag_id.length-1?a("i",[t._v(",")]):t._e()])})),a("span",{staticClass:"evaluation"},[a("i",{staticClass:"icon iconfont icon-star mr-1 align-text-top small"}),t._v(t._s(e.star))])])]),a("div",{staticClass:"detail pt-3 text-black-50"},[a("p",[a("i",{staticClass:"icon iconfont icon-dizhi mr-2 align-middle"}),t._v(t._s(e.location_id))]),a("p",[a("i",{staticClass:"icon iconfont icon-shijian mr-2 align-middle"}),t._v("訂餐時間："),a("span",[t._v(t._s(e.open_time)+" ~ "+t._s(e.close_time))])])])])])])],1)])}),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)])]),a("vue-progress-bar")],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"font-weight-normal text-light"},[t._v("微避愛點餐"),a("span",{staticClass:"pr-4"}),t._v("點餐就是快")])}],o=(a("cadf"),a("551c"),a("097d"),a("7212")),l=(a("dfa4"),a("c106")),c=a("301c"),u=a.n(c),d={name:"home",components:{swiper:o["swiper"],swiperSlide:o["swiperSlide"],Search:l["a"]},created:function(){var t=this;this.$store.commit("select_tag",""),this.$Progress.start(),this.axios.get("/tag").then(function(e){t.getTagData=e.data}),this.axios.get("/location").then(function(e){t.getLocationData=e.data}),this.axios.get("/restaurant").then(function(e){t.getRestaurantData=e.data,t.$Progress.finish()})},data:function(){return{getTagData:[],getLocationData:[],getRestaurantData:[],swiperOption:{notNextTick:!1,spaceBetween:10,slidesPerView:"auto",freeMode:!0,pagination:{el:".swiper-pagination",clickable:!0}},tagSwiperOption:{notNextTick:!1,slidesPerView:"auto",freeMode:!0,spaceBetween:0},banner:u.a}},methods:{selectedTag:function(t){this.$store.commit("select_tag",t),this.$router.push({name:"list"})}}},m=d,p=(a("d5bc"),a("2877")),f=Object(p["a"])(m,s,n,!1,null,"4d6552a9",null);f.options.__file="Home.vue";var h=f.exports;r["a"].use(i["a"]);var g=new i["a"]({mode:"history",routes:[{path:"/",name:"home",component:h},{path:"/restaurant",name:"list",component:function(){return a.e("chunk-41d10986").then(a.bind(null,"1a33"))}},{path:"/restaurant/:id",name:"restaurant",component:function(){return a.e("chunk-5f0342f3").then(a.bind(null,"ad68"))}},{path:"/payment",name:"payment",component:function(){return a.e("chunk-eca83402").then(a.bind(null,"1175"))},meta:{requiresAuth:!0}},{path:"/login",name:"login",component:function(){return a.e("chunk-2d2086b7").then(a.bind(null,"a55b"))},meta:{notAuth:!0}},{path:"/member",name:"member",component:function(){return a.e("chunk-5e057367").then(a.bind(null,"7319"))},meta:{requiresAuth:!0},children:[{path:"info",component:function(){return a.e("chunk-2d21a7b7").then(a.bind(null,"bc66"))}},{path:"orderlist",component:function(){return a.e("chunk-2e6644e2").then(a.bind(null,"ae40"))}},{path:"orderlist/:id",name:"orderdetail",component:function(){return a.e("chunk-2d0a4bbe").then(a.bind(null,"0866"))}}]}],scrollBehavior:function(){return{x:0,y:0}}});e["a"]=g},"56d7":function(t,e,a){"use strict";a.r(e),function(t){a("cadf"),a("551c"),a("097d");var e=a("2b0e"),r=a("3dfd"),i=a("41cb"),s=a("c0d6"),n=(a("4989"),a("bc3a")),o=a.n(n),l=a("a7fe"),c=a.n(l),u=a("1157"),d=a.n(u),m=a("26b9"),p=a.n(m),f=a("427f"),h=a.n(f),g=a("7bb1");a("b41e");t.$=d.a,e["a"].use(c.a,o.a),e["a"].use(g["b"],{events:"blur"}),g["a"].localize("zh_TW",h.a),e["a"].use(p.a,{color:"#f94665",failedColor:"red",height:"2px"}),e["a"].config.productionTip=!1,o.a.defaults.baseURL="https://jsonbin.org/ambermiao/iorder",o.a.defaults.headers.common["Authorization"]="token e311ae9a-8ad0-4b12-aa75-54450f41b88c",i["a"].beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth})){if(s["a"].state.is_login)return void a();a({path:"/"})}else a();if(t.matched.some(function(t){return t.meta.notAuth})){if(s["a"].state.is_login)return void a({path:"/payment"});a()}else a()}),new e["a"]({store:s["a"],router:i["a"],render:function(t){return t(r["a"])}}).$mount("#app")}.call(this,a("c8ba"))},b41e:function(t,e,a){},c0d6:function(t,e,a){"use strict";a("7514"),a("cadf"),a("551c"),a("097d");var r=a("2b0e"),i=a("2f62"),s=a("bc3a"),n=a.n(s);r["a"].use(i["a"],n.a),n.a.defaults.baseURL="https://jsonbin.org/ambermiao/iorder",n.a.defaults.headers.common["Authorization"]="e311ae9a-8ad0-4b12-aa75-54450f41b88c",e["a"]=new i["a"].Store({state:{selected_tag:"",restaurant:null,status:"",member_id:""|localStorage.getItem("member"),member:null,is_login:!!localStorage.getItem("member"),cart:null!=JSON.parse(localStorage.getItem("cart"))?JSON.parse(localStorage.getItem("cart")):{restaurant_id:null|localStorage.getItem("restaurant"),products:[]}},mutations:{select_tag:function(t,e){t.selected_tag=e},auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.member_id=e.id,t.member=e,t.cart.member_id=e.id,t.is_login=!0},auth_error:function(t){t.status="error",t.is_login=!1},logout:function(t){t.status="",t.member_id="",t.member=null,t.cart.member_id=null,t.is_login=!1},remove_cart:function(t){localStorage.removeItem("cart"),t.cart.products=[]},addCart:function(t,e){t.cart.products.push(e)},updateCart:function(t,e){t.cart.products.find(function(t){t.id==e.id&&(t.item=e.item)})},removeProduct:function(t,e){t.cart.products.splice(e,1),localStorage.setItem("cart",JSON.stringify(t.cart))},restaurant:function(t,e){t.restaurant=e,t.cart.restaurant_id=e.id}},getters:{cartTotal:function(t){return t.cart.products.reduce(function(t,e){return t+e.item.total},0)},cartMax:function(t){return t.cart.products.reduce(function(t,e){return Math.max(t,e.id)},0)}},actions:{getRestaurant:function(t,e){var a=t.commit,r=t.state;return new Promise(function(t){e!=r.cart.restaurant_id&&(a("remove_cart"),localStorage.setItem("restaurant",r.cart.restaurant_id));var i=e-1;n.a.get("/restaurant/"+i).then(function(e){a("restaurant",e.data),t(e)})})},getMember:function(t){var e=t.commit,a=t.state;if(a.member_id){var r=a.member_id-1;n.a.get("/member/"+r).then(function(t){e("auth_success",t.data)}).catch(function(){e("auth_error")})}},login:function(t,e){var a=t.commit;return new Promise(function(t,r){a("auth_request"),n.a.get("/member").then(function(i){var s=i.data.reduce(function(t,e){return t[e.id]=e,t},{}),n=i.data.find(function(t,a){return s[a+1].email==e.email&&s[a+1].password==e.password});n?(localStorage.setItem("member",n.id),a("auth_success",n),t()):(localStorage.removeItem("member"),a("auth_error"),r())})})},register:function(t,e){var a=t.commit;return new Promise(function(t,r){a("auth_request"),n.a.get("/member").then(function(i){var s=i.data.reduce(function(t,e){return t[e.id]=e,t},{}),o=i.data.find(function(t,a){return s[a+1].email==e.email}),l=i.data,c=i.data.length;e.id=c+1,o?(a("auth_error"),localStorage.removeItem("member"),r()):(l.push(e),n.a.post("/member",l).then(function(r){localStorage.setItem("member",e.id),a("auth_success",e),t(r)}))})})},logout:function(t){var e=t.commit;return new Promise(function(t){e("logout"),localStorage.removeItem("member"),t()})},addCart:function(t,e){var a=t.commit,r=t.state,i=t.getters;return new Promise(function(t){var s={id:i.cartMax+1,hover:!1,item:e};a("addCart",s),localStorage.setItem("cart",JSON.stringify(r.cart)),t()})},updateCart:function(t,e){var a=t.commit,r=t.state;return new Promise(function(t){a("updateCart",e),localStorage.setItem("cart",JSON.stringify(r.cart)),t()})},payFinish:function(t){var e=t.commit;return new Promise(function(t){e("remove_cart"),t()})}}})},c106:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("form",{staticClass:"form-inline search",class:t.is_home?"mt-5 d-inline-block":"",on:{submit:function(e){return e.preventDefault(),t.getSearch(e)}}},[a("div",{staticClass:"label"},[a("i",{staticClass:"icon iconfont icon-dangdi"}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.location,expression:"search.location"}],staticClass:"form-control pl-5",class:{"border-0":t.is_home},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.search,"location",e.target.multiple?a:a[0])},t.locationChange]}},[a("option",{attrs:{value:""}},[t._v("所有地區")]),t._l(t.getLocationData,function(e){return a("option",{domProps:{value:e.title}},[t._v(t._s(e.title))])})],2),a("i",{staticClass:"icon iconfont icon-xiangxiajiantou arrow-bottom"})]),a("div",{staticClass:"label restaurant-search mx-2"},[a("i",{staticClass:"icon iconfont icon-sousuo"}),a("v-select",{staticClass:"form-control py-0 pl-5",class:{"border-0":t.is_home},attrs:{label:"title",options:t.options,placeholder:"請輸入餐廳名稱或地址"},on:{input:t.restaurantChange},model:{value:t.search.restaurant,callback:function(e){t.$set(t.search,"restaurant",e)},expression:"search.restaurant"}})],1),t.is_home?a("button",{staticClass:"btn btn-primary px-4",attrs:{type:"submit"}},[t._v("Search")]):t._e()])])},i=[],s=(a("6762"),a("2fdb"),a("386d"),a("4a7a")),n=a.n(s),o={name:"Search",components:{vSelect:n.a},mounted:function(){var t=this;this.axios.get("/location").then(function(e){t.getLocationData=e.data}).catch(function(t){console.log(t)}),this.axios.get("/restaurant").then(function(e){t.getRestaurantData=e.data}).catch(function(t){console.log(t)}),0==this.is_home&&(this.search.location=this.$route.query.location_id?this.$route.query.location_id:"")},data:function(){return{getLocationData:[],getRestaurantData:[],search:{location:"",restaurant:null}}},computed:{is_home:function(){return"/"==this.$route.path},options:function(){var t=this;if(this.search.restaurant=null,""!=this.search.location&&""!=this.search.location){var e=this.getRestaurantData.filter(function(e){return e.location_id.includes(t.search.location)});return e}return this.getRestaurantData.map(function(t){return{id:t.id,title:t.title}})}},methods:{locationChange:function(){0==this.is_home&&(""==this.search.location?this.$router.push({name:"list"}):this.$router.push({name:"list",query:{location_id:this.search.location}}))},restaurantChange:function(t){0==this.is_home&&t&&this.$router.push({name:"restaurant",params:{id:t.id}})},getSearch:function(){this.search.restaurant?this.$router.push({name:"restaurant",params:{id:this.search.restaurant.id}}):""==this.search.location?this.$router.push({name:"list"}):this.$router.push({name:"list",query:{location_id:this.search.location}})}}},l=o,c=a("2877"),u=Object(c["a"])(l,r,i,!1,null,null,null);u.options.__file="Search.vue";e["a"]=u.exports},c176:function(t,e,a){t.exports=a.p+"img/downLogo.f49dabe2.svg"},c482:function(t,e,a){t.exports=a.p+"img/download.4f0756b6.svg"},d5bc:function(t,e,a){"use strict";var r=a("df4e"),i=a.n(r);i.a},df4e:function(t,e,a){},e347:function(t,e,a){t.exports=a.p+"img/logo.0c0210ae.svg"}});
//# sourceMappingURL=app.ab4d834f.js.map